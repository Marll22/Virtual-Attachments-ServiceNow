<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_script">
    <sys_ui_script action="INSERT_OR_UPDATE">
        <active>true</active>
        <description/>
        <global>false</global>
        <ignore_in_now_experience>false</ignore_in_now_experience>
        <name>x_376096_va.virtual_attachments</name>
        <script><![CDATA[var x_376096_va=x_376096_va||{};x_376096_va.virtual_attachments=(function(){"use strict";return x_376096_va.virtual_attachments||(x_376096_va.loader.get("window",function(e){n(t=e,a)}),x_376096_va.loader.get("config",function(e){n(t,a=e)}),{type:"virtual_attachments"});var t,a;function n(e,t){function d(e){var t,a,n=e.querySelector("#attachFileCell"),l=h.document.getElementById("sys_attachment"),d=h.document.createElement("label");d.htmlFor="x_376096_va_virtual_url",d.classList.add("col-md-1","control-label"),d.innerText="URL";var c=h.document.createElement("input");c.id=d.htmlFor,c.type="url",c.placeholder="File URL",c.style.width="100%";var r=h.document.createElement("div");r.classList.add("col-md-8","form-field");var i=h.document.createElement("div");i.classList.add("row","form-group"),r.appendChild(c),i.appendChild(d),i.appendChild(r);e=h.document.createElement("label");e.htmlFor="x_376096_va_virtual_name",e.classList.add("col-md-1","control-label"),e.innerText="Name";var o=h.document.createElement("input");o.id=e.htmlFor,o.placeholder="File Name",o.style.width="100%",c.onchange=function(){var e;c.value&&((e=p(c.value)).ext?o.placeholder="."+e.ext:o.placeholder="File Name",e.name?o.value=e.name:o.value="")};d=h.document.createElement("div");d.classList.add("col-md-8","form-field");r=h.document.createElement("div");r.classList.add("row","form-group");var s=h.document.createElement("input");s.id="x_376096_va_virtual_upload",s.style["margin-left"]="8px",s.type="button",s.value="Add",s.onclick=function(){if(c.value&&o.value){var e=p(o.value);if(e.type){try{new URL(c.value)}catch(e){return}var t,a=_.mime_config[e.ext];a&&(t=new File([new Uint8Array(a.s),c.value],e.name,{type:e.type}),(a=new DataTransfer).items.add(t),(e=h.document.getElementById("attachFile")).file=t,e.files=a.files,s.disabled=!0,e.onchange())}}},d.appendChild(o),r.appendChild(e),r.appendChild(d),r.appendChild(s);var m=h.document.createElement("input");m.type="checkbox",m.style["vertical-align"]="top",m.id="x_376096_va_virtual_toggle",m.onchange=function(){var e=new URL(l.action);e.searchParams.set("x_376096_va_virtual_attachment",this.checked.toString()),l.action=e.toString();e=h.document.getElementById("loadFileXml");e&&(e.disabled=this.checked),this.checked?(t.style.display="",a.style.display="",c.focus()):(t.style.display="none",a.style.display="none")};d=h.document.createElement("div");d.style["padding-right"]="15px",d.style.float="right",d.appendChild(m),d.appendChild(h.document.createTextNode(" "+_.translations.External)),n.appendChild(d);d=h.document.createElement("td");d.colSpan="3",d.style["white-space"]="nowrap",d.style["padding-top"]="8px",d.appendChild(i),(t=h.document.createElement("tr")).style.display="none",t.appendChild(d);d=h.document.createElement("td");d.colSpan="3",d.appendChild(r),(a=h.document.createElement("tr")).style.display="none",a.appendChild(d);n=n.parentElement.parentElement;n.appendChild(t),n.appendChild(a);var u=h.refreshAttachments;h.refreshAttachments=function(){l=h.document.getElementById("sys_attachment"),c=h.document.getElementById("x_376096_va_virtual_url"),o=h.document.getElementById("x_376096_va_virtual_name");var e=h.document.getElementById("x_376096_va_virtual_upload");e.onclick=s.onclick,e.disabled=!1,s=e;var t=h.document.getElementById("x_376096_va_virtual_toggle");t.onchange=m.onchange;e=m.checked;(m=t).checked=e;e=arguments[0];m.checked&&e&&(_.attachments[e]={virtual:!0,url:c.value},c.value="",o.value=""),u.apply(this,arguments),v()}}function v(){var e,t=_.attachments;for(e in t){var a=t[e].url;Array.prototype.slice.call(h.document.querySelectorAll('a[href*="sys_attachment.do?sys_id='+e+'"]')).forEach(function(e){e.href=a,e.target="_blank"}),Array.prototype.slice.call(h.document.querySelectorAll("a.attachment.view_"+e)).forEach(function(e){e.onclick=function(){h.open(a,"_blank").focus()}})}}function p(e){var t,a,n;if(e)for(var l=(l=e.match(/[^/=\\&?]+\.\w{3,4}(?=([?&].*$|$))/g)||[]).reverse(),d=0;d<l.length;d++){var c=l[d],r=c.lastIndexOf("."),i=c.substr(r+1),r=_.mime_config[i];if(r){a=i,t=r.t,n=c;break}}return{type:t,ext:a,name:n}}var h,_,c;e&&t&&t.enabled&&(h=e,_=t,v(),-1<h.navigator.userAgent.indexOf("MSIE")||-1<h.navigator.userAgent.indexOf("Trident")||(c="va-virtual-attachments",e=new MutationObserver(function(e){for(var t=0;t<e.length;t++){var a=e[t];if(a.addedNodes)for(var n=0;n<a.addedNodes.length;n++){var l=a.addedNodes[n];"RENDERED_BODY"==l.tagName&&l.closest("#attachment")&&!l.classList.contains(c)&&(l.classList.add(c),d(l),v())}}}),(t=h.document.querySelector("#attachment rendered_body"))&&!t.classList.contains(c)&&(t.classList.add(c),d(h)),e.observe(h.document,{childList:!0,subtree:!0})))}})();]]></script>
        <script_name>virtual_attachments</script_name>
        <sys_class_name>sys_ui_script</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-08-01 07:54:55</sys_created_on>
        <sys_id>b2a1ade5978911102f77b4b3f153af70</sys_id>
        <sys_mod_count>9</sys_mod_count>
        <sys_name>x_376096_va.virtual_attachments</sys_name>
        <sys_package display_value="Virtual Attachments" source="x_376096_va">ccd819ed974911102f77b4b3f153af19</sys_package>
        <sys_policy/>
        <sys_scope display_value="Virtual Attachments">ccd819ed974911102f77b4b3f153af19</sys_scope>
        <sys_update_name>sys_ui_script_b2a1ade5978911102f77b4b3f153af70</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2022-08-01 11:37:28</sys_updated_on>
        <ui_type>0</ui_type>
        <use_scoped_format>true</use_scoped_format>
    </sys_ui_script>
</record_update>
